<!DOCTYPE html>

<!-- Add a title -->
<h1>CS498 Final Project Narrative Dashboard: Covid-19 Re-opening</h1>

<!-- Add a bit of text -->
<p>The national lockdown and staying home order start officially on 2020-03-11 for Covid-19 pandemic. During pandemic time period, which state is the top 1 risky? What is the trend for this stateâ€™s daily new cases as compared to California? After the stage 2 resilience plan, can you suggest which state could be faster to moving to stage 3 reopening plan? And why?</p>
<p>Any public dataset can be used for this assignment. For example, this assignment provides an opportunity to further analyze the spread of the COVID-19 virus. Some datasets include:</p>
<p>This is the public Covid-19 dataset <a href= "https://github.com/nytimes/covid-19-data">from New York Times (US)</a></p>
<p>You can also find other datasets, or combine these or other datasets, so long as all of the datasets are publicly available. These datasets have created some comprehensive dashboards as well as some more targeted analyses that focus on a smaller number of charts.</p>

<!-- Add a link -->
<p>This is <a href="https://public.tableau.com/profile/xiaojiao.zang#!/vizhome/Cov19_us_states/USNewCasesDashboard?publish=yes">a link to the Covid-19 Tableau Dashboard</a></p>

<p>Bar Chart</p>
<!-- <html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> path {stroke: black;}</style>
<body>
<svg width=300 height=300>
</svg>
<script>
var data = [4,8,15,16,23,42];
var color = ['pink','lightyellow','lightgreen','lightcyan','lightblue','violet'];
var pie = d3.pie();
var arc = d3.arc().innerRadius(0).outerRadius(100);
d3.select("svg")
.append("g")
.attr("transform","translate(150,150)")
.selectAll("path")
.data(pie([4,8,15,16,23,42]))
.enter()
.append("path")
.attr("d",arc)
.attr("fill",function(d,i) {return color[i];});
</script>
</body>
</html> -->

<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- Color scale -->
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

<!-- Add 2 buttons -->
<button onclick="update(data1)">Data 1</button>
<button onclick="update(data2)">Data 2</button>

<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>
<script>

    // set the dimensions and margins of the graph
    var width = 450
        height = 450
        margin = 40
    
    // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
    var radius = Math.min(width, height) / 2 - margin
    
    // append the svg object to the div called 'my_dataviz'
    var svg = d3.select("#my_dataviz")
      .append("svg")
        .attr("width", width)
        .attr("height", height)
      .append("g")
        .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");
    
    // create 2 data_set
    var data1 = {a: 9, b: 20, c:30, d:8, e:12}
    var data2 = {a: 6, b: 16, c:20, d:14, e:19, f:12}
    
    // set the color scale
    var color = d3.scaleOrdinal()
      .domain(["a", "b", "c", "d", "e", "f"])
      .range(d3.schemeDark2);
    
    // A function that create / update the plot for a given variable:
    function update(data) {
    
      // Compute the position of each group on the pie:
      var pie = d3.pie()
        .value(function(d) {return d.value; })
        .sort(function(a, b) { console.log(a) ; return d3.ascending(a.key, b.key);} ) // This make sure that group order remains the same in the pie chart
      var data_ready = pie(d3.entries(data))
    
      // map to data
      var u = svg.selectAll("path")
        .data(data_ready)
    
      // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
      u
        .enter()
        .append('path')
        .merge(u)
        .transition()
        .duration(1000)
        .attr('d', d3.arc()
          .innerRadius(0)
          .outerRadius(radius)
        )
        .attr('fill', function(d){ return(color(d.data.key)) })
        .attr("stroke", "white")
        .style("stroke-width", "2px")
        .style("opacity", 1)
    
      // remove the group that is not present anymore
      u
        .exit()
        .remove()
    
    }
    
    // Initialize the plot with the first dataset
    update(data1)
    
</script>

</script>
<style>
  @import url('https://fonts.googleapis.com/css?family=Baloo+Thambi');
h1 {
     font-size:16px sans-serif;
     line-height:0.2em;
     font-weight: bold;
     font-family: Baloo Thambi;
   }
h2 {
     font: 15px sans-serif;
     line-height:0.2em;
     font-weight: bold;
     font-family: Baloo Thambi;
   }
   
   p {
     fill: #8FA2AC;
     font-family: Baloo Thambi;
     font-size: 12px;
   }
.chart {
     font-family: Baloo Thambi;
   }
</style>
</head>
<body>
   <div id='title' style='width:1366px;'>
      <h1>Overall Map</h1>
      <h2>US Map</h2>
      <br></br>
   </div>
   <div id='vis' style='width:1366px;'>
       <svg class='chart-outer'><g class='chart'></g></svg>
   </div>
   <div id='caption' style='width:1366px;'>
      <p style='text-align:right'>Caption</p>
   </div>
<script>
var data = JSON.parse(document.getElementById('data').innerHTML);
  var vis_width = 1366;
  var vis_height = 650;
  var params = {};
draw = function(data, vis_width, vis_height, params) {
var margin = {top: 30, right: 30, bottom: 30, left: 30};
      var width = vis_width - margin.left - margin.right,
          height = vis_height - margin.top - margin.bottom;
      d3.select('.chart-outer')
          .attr('width', vis_width)
          .attr('height', vis_height);
var svg = d3.select('.chart').append('svg')
            .attr('width', vis_width)
            .attr('height', vis_width)
          .append('g')
            .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');
document.getElementById('vis').setAttribute('style','height:'+vis_height+'px');
  }
draw(data,vis_width,vis_height,params);
</script>
</body>
</html>


<!DOCTYPE html>
<meta charset="utf-8">
<body>
<script src="//d3js.org/d3.v3.min.js"></script>
<script>

var width = 960,
    height = 500;

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

svg.append("circle")
    .attr("cx", 350)
    .attr("cy", 200)
    .attr("r", 200)
    .style("fill", "brown")
    .style("fill-opacity", ".5");

svg.append("circle")
    .attr("cx", 550)
    .attr("cy", 200)
    .attr("r", 200)
    .style("fill", "steelblue")
    .style("fill-opacity", ".5");

svg.append("circle")
    .attr("cx", 450)
    .attr("cy", 300)
    .attr("r", 200)
    .style("fill", "green")
    .style("fill-opacity", ".5");

</script>
